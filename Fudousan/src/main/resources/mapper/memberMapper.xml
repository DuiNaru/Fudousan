<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.real.fudousan.member.dao.MemberMapper">
	<resultMap type="member" id="memberResultMap">
		<id property="memberId" column="member_id"/>
		<result property="creDate" column="member_cre_date"/>
		<result property="delDate" column="member_del_date"/>
		<result property="designer" column="designer"/>
		<result property="email" column="email"/>
		<result property="memberId" column="member_id"/>
		<result property="password" column="password"/>
		<result property="phone" column="phone"/>
		<result property="picture" column="picture"/>
		<result property="text" column="member_text"/>
		<result property="memberName" column="member_name"/>
		<!-- Permission -->
		<association property="permission" column="permission_id" javaType="com.real.fudousan.member.vo.Permission" resultMap="permissionResultMap"/>
	</resultMap>
	
	<resultMap type="permission" id="permissionResultMap">
		<id property="permissionId" column="permission_id"/>
		<result property="name" column="permission_name"/>
	</resultMap>
	
	<select id="selectMember" parameterType="member" resultType="member">
		SELECT
			member_id as "memberId",
			email,
			password,
			phone,
			picture,
			text,
			cre_date as "creDate",
			del_date as "delDate",
			permission_id as "permission",
			designer,
			member_name as "memberName"
		FROM
			member
		WHERE
			<if test="email != null">
				email=#{email}
			</if>
			<if test="phone != null">
				phone=#{phone}
			</if>
	</select>
	
	
	<insert id="insertMember" parameterType="member">
		INSERT INTO 
		 member 
		(	
			member_id
			,member_name 
			,password
			,email
			,phone
			,picture
			,permission
			,designer
			,text
			
		
		)
		VALUES
		(	
			SEQ_Member_ID.nextval
			,#{memberName}
			,#{password}
			,#{email}
			,#{phone}
			,#{picture}
			,#{permission}
			,#{designer}
			,#{text}
			
		)
	
	
	</insert>
</mapper>
