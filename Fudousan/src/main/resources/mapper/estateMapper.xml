<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.real.fudousan.estate.dao.EstateMapper">
	<select id="selectByIds" parameterType="java.util.Set" resultMap="estateResultMap">
		select
			ROOM_ID
			,SNAPSHOT
			,MAP
			,ROOM.CRE_DATE CRE_DATE
			,ROOM.DEL_DATE DEL_DATE
			,HEIGTH
			,FLOOR_TEXTURE_ID
			,CEILING_TEXTURE_ID
			,MEMBER_ID
			,ROOM.ESTATE_ID ESTATE_ID 
			,Region
			,Prefecture
			,Municipality
			,DistrictName
			,NearestStation
			,TimeToNearestStation
			,TradePrice
			,PricePerUnit
			,FloorPlan
			,Area
			,UnitPrice
			,LandShape
			,Frontage
			,TotalFloorArea
			,BuildingYear
			,Structure
			,Use
			,Purpose
			,Direction
			,Classification
			,Breadth
			,CityPlanning
			,CoverageRatio
			,FloorAreaRatio
			,Period
			,Renovation
			,Remarks
			,estate.DEL_DATE estate_DEL_DATE
			,estate.MunicipalityCode_ID MunicipalityCode_ID
			,estate.TRANS_TYPE_ID TRANS_TYPE_ID
			,ESTATE_NAME
		from
			ESTATE
		join
			MunicipalityCode
		on
			estate.MunicipalityCode_ID = municipalitycode.MunicipalityCode_ID
		join
			TRANS_TYPE
		on
			estate.TRANS_TYPE_ID = trans_type.TRANS_TYPE_ID
		where
			room.MEMBER_ID IN <foreach collection="_parameter" item="id" open="(" separator=", " close=")">#{id}</foreach>
	</select>
	
	<!-- 객체 별칭이 type  property가 vo 필드명   column이 DB이름-->
	<resultMap type="estate" id="estateResultMap">
		<id 	property="estateId" 				column="ESTATE_ID"/>
		<result property="region" 					column="Region"/>
		<result property="prefecture" 				column="Prefecture"/>
		<result property="municipality" 			column="Municipality"/>
		<result property="districtname" 			column="DistrictName"/>
		<result property="neareststation" 			column="NearestStation"/>
		<result property="timetoneareststation"		column="TimeToNearestStation"/>
		<result property="tradeprice" 				column="TradePrice"/>
		<result property="priceperunit" 			column="PricePerUnit"/>
		<result property="floorplan" 				column="FloorPlan"/>
		<result property="area" 					column="Area"/>
		<result property="unitprice" 				column="UnitPrice"/>
		<result property="landshape" 				column="LandShape"/>
		<result property="frontage" 				column="Frontage"/>
		<result property="totalfloorarea" 			column="TotalFloorArea"/>
		<result property="buildingyear" 			column="BuildingYear"/>
		<result property="structure" 				column="Structure"/>
		<result property="use" 						column="Use"/>
		<result property="purpose" 					column="Purpose"/>
		<result property="direction" 				column="Direction"/>
		<result property="classification" 			column="Classification"/>
		<result property="breadth" 					column="Breadth"/>
		<result property="cityplanning" 			column="CityPlanning"/>
		<result property="coverageratio" 			column="CoverageRatio"/>
		<result property="floorarearatio" 			column="FloorAreaRatio"/>
		<result property="period" 					column="Period"/>
		<result property="renovation" 				column="Renovation"/>
		<result property="remarks" 					column="Remarks"/>
		<result property="delDate" 					column="estate_DEL_DATE"/>
		<result property="estateName" 				column="ESTATE_NAME"/>
		<association property="municipalitycode"	column="MunicipalityCode_ID" javaType="com.real.fudousan.estate.vo.MunicipalityCode" resultMap="MunicipalityCodeResultMap"/>
		<association property="transType" 			column="TRANS_TYPE_ID"       javaType="com.real.fudousan.estate.vo.TransType"        resultMap="transTypeResultMap"/>
	</resultMap>
	
		<!-- associationdml property는 속하는 객체의 vo변수명이다. -->
	
	<resultMap type="transtype" id="transTypeResultMap">
		<id 	property="transTypeId" column="TRANS_TYPE_ID"/>
		<result property="transName"   column="TRANS_NAME"/>
	</resultMap>

	<resultMap type="municipalitycode" id="MunicipalityCodeResultMap">
		<id 	property="municipalitycodeId" column="MunicipalityCode_ID"/>
		<result property="codeName" 		  column="CODE_NAME"/>
	</resultMap>
</mapper>
